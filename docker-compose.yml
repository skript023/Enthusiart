version: '3'
services:
  # PHP Service
    Enthusiart:
        build:
            context: .
            dockerfile: Dockerfile
        container_name: enthusiart
        restart: on-failure
        depends_on:
            - Enthusiart-Database
        volumes:
            - .:/var/www/html
        ports:
            - "9000:9000"

  # MySQL Service
    Enthusiart-Database:
        image: postgres:latest
        restart: on-failure
        container_name: enthusiart-database
        environment:
            POSTGRES_DB: gaboot
            POSTGRES_USER: docker
            POSTGRES_PASSWORD: gaboot
        ports:
            - 5433:5432
        expose:
            - 5432
        networks:
            - gaboot
        shm_size: 128mb
        volumes:
            - ./postgres:/dev/shm
            - ./postgres/data:/var/lib/postgresql/data
            - ./postgres/config:/etc/postgresql/

volumes:
  db_data:
